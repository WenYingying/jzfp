<!DOCTYPE html>
<html>
	<head>
		<title>教育</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta id="viewport" content="width=device-width,initial-scale=0.2, maximum-scale=1,user-scalable=no", name="viewport">
		<link rel="stylesheet" type="text/css" href="../css/common.css"/>
		<script type="text/javascript" src="../js/jquery-1.12.1.min.js" ></script>
		<style type="text/css">
			.Anmelden li{
				width: 30%;
			}
			.Anmelden li>select{
				width: 100px !important;
			}
			.btn {
		       width: 4.8rem !important;
               height: 1.5rem !important;
               margin-top: 0px !important;
               position: absolute;
                left: 5.3rem;
                top: 5rem;
			}
			.Edure_info{
				width: 96%;
			    height: 5rem;
			    display: block;
			    overflow: hidden;
			    border: 1px solid #e6e6e6;
			    background: url(../img/alert_bg.jpg);
			    line-height: 3.5rem;
			    font-size: 0.8rem;
			    padding-left: 4%;
			}
			.Edure_info>li{
				width: 50%;
			    float: left;
			    display: inline-block;
			    height: 1.5rem;
			    line-height: 1.5rem;
			}
			.Edure_info>li:first-child{
				width: 100%;
   				margin-top: 0.25rem;
			}
			.Edure_info>li>span{
				float: left;
			    font-size: 0.7rem;
			    color: #808080;
			    line-height: 1.5rem;
			    margin-right: 0.5rem;
			}
			.Edure_info>li>label{
				color: #005982;
			}
			.Edure_info>li:nth-child(2N+3)>label{
				color: #ff7d2a;
			}
			.progress{
				margin-top: 0.5rem;
			}
			.progress>a{
				width: 7rem;
			    margin: 0.5rem 0.5rem;
			    line-height: 1.5rem;
			    height: 1.5rem;
			    display: inline-block;
			    border-radius: 3px;
			    border: 1px solid #CCCCCC;
			     outline: none;
			    padding: 0 0.3rem;
			    font-size: 0.7rem;
			}
			.progress a:hover,.progress a.active{
				border: 1px solid #3b94e1 !important;
    			color: #3b94e1;
			}
	 .cont_list li div:nth-of-type(1) {
              width: 6%;
        }

        .cont_list li div:nth-of-type(2) {
            width: 15%;
        }

        .cont_list li div:nth-of-type(3) {
            width: 17%;
        }

        .cont_list li div:nth-of-type(4) {
            width: 28%;
        }

        .cont_list li div:nth-of-type(5) {
            width: 10%;
        }

        .cont_list li div:nth-of-type(6) {
            width: 10%;
        }

            .cont_list li div:nth-of-type(7) {
                width: 10%;
            }
              
            /*弹框*/
            .poverty_alert{
	            width: 100%;
                height: 100%;
                position: fixed;
                background: rgba(0,0,0,0.6);
                left: 0;
                top: 0;
                z-index: 10;
            }
            .poverty_info{
	               width: 40rem;
                    background-color: #fff;
                    margin: 1rem auto;
                    border-radius: 5px;
                     height: 20rem;
            }
            .poverty_info>h3{
	            background-color: #fafafa;
                color: #7a7a7a;
                font-size: 0.9rem;
                height:2.25rem;
                line-height: 2.25rem;
                text-align: center;
                border-radius: 5px 5px 0 0;
                position: fixed;
                width: 40rem;
            }
             .poverty_info>h3>text{
                font-weight:600;
            }
            .poverty_info>h3 a{
	            background: url(../img/close.png) no-repeat;
                background-size: 100%;
                width: 0.8rem;
                height: 0.8rem;
                display: block;
                position: absolute;
                top: 0.6rem;
                right: 3%;
            }
             .poverty_top{
	            width: 100%;
                display: inline-block;
                margin-top: 2.25rem;
                overflow-y:auto;
                height:16.6rem;
                padding-bottom:1rem;
            }
             .poverty_top .poverty_top_left{
	            width:94%;
                margin:0.5rem 1rem;
	            display: inline-block;
                vertical-align:top;
            }
          
            .poverty_top .poverty_top_left>h3{
	            width: 100%;
                height: 2rem;
                border-bottom: 1px solid #cccccc;
                color: #333333;
                font-size: 0.8rem;
                line-height: 2rem;
                font-weight: 600;
            }
             .poverty_top .poverty_top_left ul{
	            width: 100%;
	            display: block;
	            overflow: hidden;
	            margin-top: 0.5rem;
            }
             .poverty_top .poverty_top_left ul li{
	             width: 33%;
                display: inline-block;
                margin-top: 0.5rem;
            }
            .poverty_top .poverty_top_left ul li span{
	            display:inline-block;
                font-size: 0.7rem;
                color: #808080;
                margin-right: 0.5rem;
                width: 30%;
                font-weight:600;
                text-align: right;
            }
            .poverty_top .poverty_top_left ul li label{
	                display: inline-block;
                    font-size: 0.7rem;
                    color: #808080;
                    margin-right: 0.5rem;
                    width: 61%;
                    vertical-align: top;
                    margin-top: 0.3rem;
                    word-wrap: break-word;
                    word-break: break-all;
            }
            .poverty_top .poverty_top_left ul li a{
	            width: 3.5rem;
                height: 1.1rem;
                line-height: 1.1rem;
                color: #fff;
                background-color: #7198ba;
                display: block;
                text-align: center;
                border-radius: 3px;
               display:inline-block;
               font-size:0.6rem;
            }
             .poverty_top .poverty_top_left ul .top_left2{
	            width: 33% !important;
	           display:inline-block;
	
            }
                      .listcount{
             width:100%;
             height:1.5rem;
             line-height:1.5rem;
             color:#4f4f4f;
             overflow:hidden;
             font-size:0.7rem;
         }
         .listcount>span{
             color:#005982;
                          font-size:0.8rem;
         }
         .cont_list{
             margin-top:0rem;
         }
		</style>
	</head>
	<body>
		<div class="cont">
			<div class="cont_box">
				<div class="cont_left">
					<div class="middle" style="padding-bottom: 0">
						<div id="main" style="width: 100%;height:450px;margin-top:2rem;"></div>
					</div>
				</div>
				<div class="cont_right">
					<div class="middle"  style="padding-bottom: 0">
						<h1 class="title">教育扶贫指数</h1>
						<ul class="tit_search">
							<li>
								<a href="../Poverty/Pager.html" class="a_search gopoverty">精准扶贫</a>
							</li>
						</ul>
						<div class="cont_right_pie">
							<h1>
								
								<span class="EduPlace"></span> 贫困户数
								<span id="HouseSumCount"></span>
                                贫困人数<span id="SumCount"></span>
                                在校人数<span id="InschoolSumCount"></span>
							</h1>
							<ul class="Anmelden">
                                <li>
                                    <span>市</span>
                                    <select id="selectcity"><option value="0">全部</option></select>
                                </li>
                                <li>
                                    <span>县</span>
                                    <select id="selectcounty"><option value="0">全部</option></select>
                                </li>
                                <li>
                                    <span>乡</span>
                                    <select id="selectcountyside"><option value="0">全部</option></select>
                                </li>
                                <li>
                                    <span>村</span>
                                    <select id="selectvillage"><option value="0">全部</option></select>
                                </li>
							</ul>
							<div class="btn">
								<a href="javascript:void(0)" class="SearchAll">查询</a>
							</div>
							<div id="bar" style="width: 100%;height:300px;"></div>
						</div>
					</div>
				</div>
			</div>
			<!--<div class="cont_box">
				<div class="cont_left">
					<div class="middle" style="padding-bottom: 0">
						<div id="main1" style="width: 100%;height:375px;margin-top:2.5rem"></div>
					</div>
				</div>
				<div class="cont_right">
					<div class="middle"  style="padding-bottom: 0">
						<h1 class="title"><text class="EduPlace"></text>教育阶段扶贫统计</h1>
                        <div class="cont_right_pie">
                            <ul class="Edure_info">
                                <li>
                                    <span><text class="Edulevelstr">加载中</text></span>
                                    <label id="currentarea">加载中</label>
                                </li>
                                <li>
                                    <span>已复核人数:</span>
                                    <label id="currentoutpc">加载中</label>
                                </li>
                                <li>
                                    <span>未复核人数:</span>
                                    <label id="currentpc">加载中</label>
                                </li>
                                <li>
                                    <span>已复核比例:</span>
                                    <label id="currentoutpcrebate">加载中</label>
                                </li>
                                <li>
                                    <span id="currentarea">未复核比例:</span>
                                    <label id="currentpcrebate">加载中</label>
                                </li>
                            </ul>
                            <div class="progress">
                                <a class="active" href="javascript:void(0)">不限</a>
                                <a href="javascript:void(0)">学前教育</a>
                                <a href="javascript:void(0)">小学</a>
                                <a href="javascript:void(0)">初中</a>
                                <a href="javascript:void(0)">特教学生</a>
                                <a href="javascript:void(0)">高中</a>
                                <a href="javascript:void(0)">中职教育</a>
                                <a href="javascript:void(0)">高职教育</a>
                                <a href="javascript:void(0)">专科</a>
                                <a href="javascript:void(0)">本科</a>
                                <a href="javascript:void(0)">硕士</a>
                                <a href="javascript:void(0)">博士</a>
                            </div>
                        </div>
					</div>
				</div>
			</div>-->
			<div class="cont_box">
				<div class="middle">
					<h1 class="title"><text class="EduPlace"></text>贫困户信息</h1>
					<ul class="tit_search">
						<li>
                            是否复核:
                            <select id="dlPovertyState">
                                <option value="">全部</option>
                                <option value="0">未复核</option>
                                <option value="1">已复核</option>
                            </select>
						</li>
                        <li>
                            教育阶段:
                            <select id="dledulevel">
                                <option value="">全部</option>
                               <option value="学前教育">学前教育</option>
                               <option value="小学">小学</option>
                               <option value="初中">初中</option>
                               <option value="特教学生">特教学生</option>
                               <option value="高中">高中</option>
                               <option value="中职教育">中职教育</option>
                               <option value="高职教育">高职教育</option>
                               <option value="专科">专科</option>
                               <option value="本科">本科</option>
                               <option value="硕士">硕士</option>
                               <option value="博士">博士</option>
                            </select>
                        </li>
						<li>
                            <input type="text" placeholder="输入户主姓名/证件号" id="SearchText">
						</li>
						<li>
							<a class="a_search searchlist" href="javascript:void(0)">搜索</a>
						</li>
					</ul>
                    <div class="cont_list" data-role="povertylist">
                        <p class="listcount">共计<span></span>户</p>
                        <ul>
                            <li>
                                <div>
                                    序列
                                </div>
                                <div>户主姓名</div>
                                <div>户主身份证号码</div>
                                <div>地区</div>
                                <div>家庭人数</div>
                                <div>家庭在读人数</div>
                                <div>是否复核</div>
                            </li>
                        </ul>
                        <div class="clear">
                            <div class="tcdPageCode"></div>
                        </div>
                    </div>
				</div>
			</div>
		</div>
		<script type="text/javascript" src="../js/jquery-1.12.1.min.js" ></script>
        <script src="../js/Common.js"></script>
        <script src="../js/echarts.js"></script>
        <script src="../js/jquery.page.js"></script>
		<script type="text/javascript">
			$(function(){
				//$('.progress a').click(function(){
				//    $(this).addClass("active").siblings("a").removeClass("active");
				//    GetMonth();
				//});
				if(UserList.CountyId!=0)
				{
				    $("#selectcity").empty();
				    $("<option>").appendTo($("#selectcity")).val(UserList.CityId).text(UserList.CityName);
				    $("#selectcounty").empty();
				    $("<option>").appendTo($("#selectcounty")).val(UserList.CountyId).text(UserList.CountyName);
				    GetCountrySideList(UserList.CountyId);
				    $(".EduPlace").text(UserList.CountyName);
				    $("#gopoverty").css("dispaly", "inline-block");
				}
				else if(UserList.CountyId==0&&UserList.CityId!=0)
				{
				    $("#selectcity").empty();
				    $("<option>").appendTo($("#selectcity")).val(UserList.CityId).text(UserList.CityName);
				    GetCountyList(UserList.CityId);
				    $(".EduPlace").text(UserList.CityName);
				}
				else
				{
				    $(".EduPlace").text("青海省");
				    GetCityList();

				}
				$(".SearchAll").click(function () {
				    GetPovertyByEdu();
				    //GetMonth();
				    PageCheck = true;
				    GetList(1);
				    var CityID = $("#selectcity").val();
				    var CountyID = $("#selectcounty").val();
				    var CountrySideID = $("#selectcountyside").val();
				    var VillageId = $("#selectvillage").val();
				    if(VillageId!=0)
				    {
				        $(".EduPlace").text($("#selectvillage").children("option:selected").text());
				    }
				    else if(VillageId==0&&CountrySideID!=0)
				    {
				        $(".EduPlace").text($("#selectcountyside").children("option:selected").text());
				    }
				    else if (VillageId == 0 && CountrySideID == 0 && CountyID != 0) {
				        $(".EduPlace").text($("#selectcounty").children("option:selected").text());
				    }
				    else if (VillageId == 0 && CountrySideID == 0 && CountyID == 0 && CityID != 0) {
				        $(".EduPlace").text($("#selectcity").children("option:selected").text());
				    }
				    else
				    {
				        $(".EduPlace").text("青海省");
				    }

				});
				$(".searchlist").click(function () {
				    PageCheck = true;
				    GetList(1);
				});
				$(".SearchAll").click();
			});
			function GetCityList() {
			    $("#selectcity").empty();
			    $("<option>").appendTo($("#selectcity")).val(0).text("全部");
			    $.post(ServiceUrl + "CityInterface/GetHandler.ashx", { ProvinceID: 29 }, function (data) {
			        var result = JSON.parse(data);
			        if (result != null) {
			            if (result.Result) {
			                $(result.Data).each(function () {
			                    $("<option>").appendTo($("#selectcity")).val(this.ID).text(this.Name);
			                });
			            }
			        }
			    });
			    $("#selectcity").change(function () {
			        $("#selectcountyside").empty();
			        $("<option>").appendTo($("#selectcountyside")).val(0).text("全部");
			        $("#selectvillage").empty();
			        $("<option>").appendTo($("#selectvillage")).val(0).text("全部");
			        GetCountyList($(this).val());
			    });
			}
			function GetCountyList(CityID) {
			    $("#selectcounty").html("");
			    $("<option>").appendTo($("#selectcounty")).val(0).text("全部");
			    $.post(ServiceUrl + "CountyInterface/GetHandler.ashx", { CityID: CityID }, function (data) {
			        var result = JSON.parse(data);
			        if (result != null) {
			            if (result.Result) {
			                $(result.Data).each(function () {
			                    $("<option>").appendTo($("#selectcounty")).val(this.ID).text(this.Name);
			                });
			            }
			        }
			    });
			    $("#selectcounty").change(function () {
			        $("#selectvillage").empty();
			        $("<option>").appendTo($("#selectvillage")).val(0).text("全部");
			        GetCountrySideList($(this).val());
			    });
			}
			function GetCountrySideList(CountyID) {
			    $("#selectcountyside").empty();
			    $("<option>").appendTo($("#selectcountyside")).val(0).text("全部");
			    $.post(ServiceUrl + "CountrysideInterface/GetHandler.ashx", { CountyID: CountyID }, function (data) {
			        var result = JSON.parse(data);
			        if (result != null) {
			            if (result.Result) {
			                $(result.Data).each(function () {
			                    $("<option>").appendTo($("#selectcountyside")).val(this.ID).text(this.Name);
			                });
			            }
			        }
			    });
			    $("#selectcountyside").change(function () {
			        GetVillageList($(this).val());
			    });
			}
			function GetVillageList(CountrySideID) {
			    $("#selectvillage").empty();
			    $("<option>").appendTo($("#selectvillage")).val(0).text("全部");
			    $.post(ServiceUrl + "VillageInterface/GetHandler.ashx", { CountrySideID: CountrySideID }, function (data) {
			        var result = JSON.parse(data);
			        if (result != null) {
			            if (result.Result) {
			                $(result.Data).each(function () {
			                    $("<option>").appendTo($("#selectvillage")).val(this.ID).text(this.Name);
			                });
			            }
			        }
			    });
			}
			//右侧雷达图
			function GetPovertyByEdu() {
			    var myChart1 = echarts.init(document.getElementById('main'));
			    var myChart2 = echarts.init(document.getElementById('bar'));
			    var EduLevel = ["学前教育", "小学", "初中", "特教学生", "高中", "高职教育", "中职教育", "预科", "大专", "本科", "硕士", "博士", "其他"];
			    var ProvinceID = 29;
			    var CityID = $("#selectcity").val();
			    var CountyID = $("#selectcounty").val();
			    var CountrySideID = $("#selectcountyside").val();
			    var VillageId = $("#selectvillage").val();
			    var DataList = [];
			    var sumpovertycount = 0;
			    $(EduLevel).each(function () {
			        var edu = this.toString();

			        $.post(ServiceUrl + "PovertyArchivesInterface/GetHandler.ashx", { EduLevels: edu, ProvinceID: ProvinceID, CityID: CityID, CountyID: CountyID, CountrySideID: CountrySideID, VillageId: VillageId, StudentStatus:1 }, function (data) {
			            var result = JSON.parse(data);
			                if (result.Result) {
			                    var povertyCount = 0;
			                    var OutPovertyCount = 0;
			                    $(result.Data).each(function () {
			                        if (this.PovertyStates == "0") {
			                            povertyCount += parseInt(this.ID);
			                        }
			                        else {
			                            OutPovertyCount += parseInt(this.ID);
			                        }
			                    });
			                    sumpovertycount += parseInt(OutPovertyCount) + parseInt(povertyCount);
			                    $("#InschoolSumCount").text(sumpovertycount + "人");
			                    DataList.push({
			                        ChartName: edu,
			                        Poverty: povertyCount,
			                        NotPoverty: OutPovertyCount
			                    });

			                    loadHistogram(myChart1, DataList);
			                    loadradarchart(myChart2, DataList);
			                }

			        });
			    });
			    $.post(ServiceUrl + "PovertyArchivesInterface/GetHandler.ashx", { ProvinceID: 29, CityID: CityID, CountyID: CountyID, CountrySideID: CountrySideID, VillageId: VillageId }, function (data) {
			        var result = JSON.parse(data);
			        if (result.Result) {
			            var PovertyCount = 0;
			            var NotPovertyCount = 0;
			            $(result.Data).each(function () {
			                if (this.PovertyStates == "0") {
			                    PovertyCount += parseInt(this.ID);
			                }
			                else {
			                    NotPovertyCount += parseInt(this.ID);
			                }
			            });
			            var SumCount = parseFloat(PovertyCount) + parseFloat(NotPovertyCount);
			            $("#SumCount").text(SumCount + "人");
			        }
			    });
			    $.post(ServiceUrl + "PovertyArchivesInterface/GetByHouseHandler.ashx", { ProvinceID: 29, CityID: CityID, CountyID: CountyID, CountrySideID: CountrySideID, VillageId: VillageId, Count: 1 }, function (data) {
			        var result = JSON.parse(data);
			        if (result.Result) {
			            var PovertyCount = 0;
			            var NotPovertyCount = 0;
			            if (result.Data.length > 0) {
			                $("#HouseSumCount").text(result.Data[0].ID + "户");
			            }
			            else {
			                $("#HouseSumCount").text("0户");
			            }
			        }
			    });
			}
			function loadradarchart(doc, data) {
			    var chartnamelist = [], PovertyList = [], NotPovertyList = []
			    $(data).each(function () {
			        chartnamelist.push({ text: this.ChartName });
			        PovertyList.push(this.Poverty);
			        NotPovertyList.push(this.NotPoverty);
			    });
			    option = {
			        radar: [
                        {
                            indicator: chartnamelist,
                            center: ['50%', '50%'],
                            radius: 120,
                            startAngle: 90,
                            splitNumber: 4,
                            shape: 'circle',
                            name: {
                                formatter: '【{value}】',
                                textStyle: {
                                    color: '#72ACD1'
                                }
                            },
                            splitArea: {
                                areaStyle: {
                                    color: ['rgba(114, 172, 209, 0.2)',
                                    'rgba(114, 172, 209, 0.4)', 'rgba(114, 172, 209, 0.6)',
                                    'rgba(114, 172, 209, 0.8)', 'rgba(114, 172, 209, 1)'],
                                    shadowColor: 'rgba(0, 0, 0, 0.3)',
                                    shadowBlur: 10
                                }
                            },
                            axisLine: {
                                lineStyle: {
                                    color: 'rgba(255, 255, 255, 0.5)'
                                }
                            },
                            splitLine: {
                                lineStyle: {
                                    color: 'rgba(255, 255, 255, 0.5)'
                                }
                            }
                        }
			        ],
			        series: [
                        {
                            name: '雷达图',
                            type: 'radar',
                            itemStyle: {
                                emphasis: {
                                    // color: 各异,
                                    lineStyle: {
                                        width: 4
                                    }
                                }
                            },
                            data: [
                                {
                                    value: PovertyList,
                                    name: '未复核',
                                    symbol: 'rect',
                                    symbolSize: 5,
                                    lineStyle: {
                                        normal: {
                                            type: 'dashed'
                                        }
                                    }
                                },
                                {
                                    value: NotPovertyList,
                                    name: '已复核',
                                    areaStyle: {
                                        normal: {
                                            color: 'rgba(255, 255, 255, 0.5)'
                                        }
                                    }
                                }
                            ]
                        },
			        ],
			        legend: {
			            width: "0",
			            height: "0 "
			        }
			    }
			    doc.setOption(option);
			}
			function loadHistogram(doc, data) {
			    var chartnamelist = [], PovertyList = [], NotPovertyList = []
			    $(data).each(function () {
			        chartnamelist.push(this.ChartName);
			        PovertyList.push(this.Poverty);
			        NotPovertyList.push(this.NotPoverty);
			    });
			    option = {
			        title: {
			            text: '教育统计'
			        },
			        tooltip: {
			            trigger: 'axis',
			            axisPointer: {            // 坐标轴指示器，坐标轴触发有效
			                type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
			            }
			        },
			        legend: {
			            data: chartnamelist
			        },
			        color: ['#ff7d29', '#3b94e1'],
			        grid: {
			            left: '3%',
			            right: '4%',
			            bottom: '3%',
			            containLabel: true
			        },
			        xAxis: [
                        {
                            type: 'category',
                            data: chartnamelist
                        }
			        ],
			        yAxis: [
                        {
                            type: 'value'
                        }
			        ],
			        series: [
                        {
                            name: '未复核',
                            type: 'bar',
                            data: PovertyList
                        },
                        {
                            name: '已复核',
                            type: 'bar',
                            data: NotPovertyList
                        },

			        ]
			    };
			    doc.setOption(option);
			}
			//function GetMonth() {
			//    var ProvinceID = 29;
			//    var CityID = $("#selectcity").val();
			//    var CountyID = $("#selectcounty").val();
			//    var CountrySideID = $("#selectcountyside").val();
			//    var VillageId = $("#selectvillage").val();
			//    var EduLevel = $(".progress .active").html().replace("不限", "");
			//    var myarea = echarts.init(document.getElementById('main1'));
			//    var monthlist = [];
			//    for (var i = 1; i < 13; i++) {
			//        monthlist.push({
            //            month:i,
			//            PovertyCount: 0,
			//            NotPovertyCount: 0,
			//            monthPovertyRebate: 0
			//        });
			//    }
			//    $(monthlist).each(function () {
			//        var month = this.month;
			//        if (month <= (new Date().getMonth() + 1))
            //            {
			//        $.post(ServiceUrl + "PovertyArchivesInterface/GetHandler.ashx", { Month: month, ProvinceID: ProvinceID, CityID: CityID, CountyID: CountyID, CountrySideID: CountrySideID, EduLevels: EduLevel, VillageId: VillageId, StudentStatus:1 }, function (data) {
			//            var result = JSON.parse(data);
			//            if (result.Result) {
			//                var OutPovertyCount = 0;
			//                $(result.Data).each(function () {
			//                    if (this.PovertyStates != "0") {
			//                        OutPovertyCount += parseInt(this.ID);
			//                    }
			//                });
			//                $.post(ServiceUrl + "PovertyArchivesInterface/GetHandler.ashx", { EndMonth: month, ProvinceID: ProvinceID, CityID: CityID, CountyID: CountyID, CountrySideID: CountrySideID, EduLevels: EduLevel, VillageId: VillageId, StudentStatus: 1 }, function (res) {
			//                    var json = JSON.parse(res);
			//                    var AllPovertyCount = 0;
			//                    $(json.Data).each(function () {
			//                        AllPovertyCount += parseInt(this.ID);
			//                    });
			//                    var PovertyCount = AllPovertyCount - OutPovertyCount;
			//                    var sumcount = parseInt(PovertyCount) + parseInt(OutPovertyCount);
			//                    var povertyrebate = 0;
			//                    if (sumcount > 0) {
			//                        povertyrebate = parseFloat(OutPovertyCount / sumcount * 100).toFixed(2);
			//                    }
			//                    monthlist[month - 1] = {
			//                        PovertyCount: PovertyCount,
			//                        NotPovertyCount: OutPovertyCount,
			//                        monthPovertyRebate: povertyrebate
			//                    };

			//                    loadmonthchart(myarea, monthlist);
			//                });
			           
			//            }
			//        });
			//        }
			//    });
			//    $("#currentarea").text("加载中");
			//    $("#currentoutpc").text("加载中");
			//    $("#currentpc").text("加载中");
			//    $("#currentoutpcrebate").text("加载中");
			//    $("#currentpcrebate").text("加载中");
			//    $(".Edulevelstr").text(EduLevel == "" ? "所有阶段" : EduLevel);
			//    $.post(ServiceUrl + "PovertyArchivesInterface/GetHandler.ashx", { ProvinceID: ProvinceID, CityID: CityID, CountyID: CountyID, CountrySideID: CountrySideID, EduLevels: EduLevel, VillageId: VillageId, StudentStatus: 1 }, function (res) {
			//        var json = JSON.parse(res);
			//        if(json.Result)
			//        {
			//            var povertyCount = 0;
			//            var OutPovertyCount = 0;
			//            $(json.Data).each(function () {
			//                if (this.PovertyStates == "0") {
			//                    povertyCount += parseInt(this.ID);
			//                }
			//                else {
			//                    OutPovertyCount += parseInt(this.ID);
			//                }
			//            });
			//            var sumcount = parseInt(OutPovertyCount) + parseInt(povertyCount);
			//                $("#currentarea").text(sumcount+"人");
			//                $("#currentoutpc").text(OutPovertyCount + "人");
			//                $("#currentpc").text(povertyCount + "人");
			//                var povertyrebate = 0;
			//                var outpovertyrebate = 0;
			//                if (sumcount > 0) {
			//                    povertyrebate = (povertyCount / sumcount * 100).toFixed(2);
			//                    outpovertyrebate = (OutPovertyCount / sumcount * 100).toFixed(2);
			//                }
			//                $("#currentoutpcrebate").text(outpovertyrebate + "%");
			//                $("#currentpcrebate").text(povertyrebate + "%");
			//        }
			//    });

			//}
			function loadmonthchart(doc, data) {
			    var PovertyCountlist = [], NotPovertyCountlist = [], monthPovertyRebatelist = []
			    $(data).each(function () {
			        PovertyCountlist.push(this.PovertyCount);
			        NotPovertyCountlist.push(this.NotPovertyCount);
			        monthPovertyRebatelist.push(this.monthPovertyRebate);
			    });
			    var option = {
			        tooltip: {
			            trigger: 'axis'
			        },
			     
			        legend: {
			            data: ['未复核', '已复核', '复核比例']
			        },
			        xAxis: [
                        {
                            type: 'category',
                            data: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月']
                        }
			        ],
			        yAxis: [
                        {
                            type: 'value',
                            name: '人数',
                            //min: 0,
                            //max: 250,
                            //interval: 50,
                            axisLabel: {
                                formatter: '{value}'
                            }
                        },
                        {
                            type: 'value',
                            name: '比例(%)',
                            min: 0,
                            max: 100,
                            //interval: 20,
                            axisLabel: {
                                formatter: '{value}'
                            }
                        }
			        ],
			        series: [
                        {
                            name: '未复核',
                            type: 'bar',
                            data: PovertyCountlist
                        },
                        {
                            name: '已复核',
                            type: 'bar',
                            data: NotPovertyCountlist
                        },
                        {
                            name: '复核比例',
                            type: 'line',
                            yAxisIndex: 1,
                            data: monthPovertyRebatelist
                        }
			        ]
			    };
			    doc.setOption(option);
			}
			var pagesize = 15;
			var PageCheck = true;
			function GetList(Pageno) {
			    var ProvinceID = 29;
			    var CityID = $("#selectcity").val();
			    var CountyID = $("#selectcounty").val();
			    var CountrySideID = $("#selectcountyside").val();
			    var VillageId = $("#selectvillage").val();
			    var SearchText = $("#SearchText").val();
			    var IdCardNo = "";
			    var Name = "";
			    if (!/[\u4e00-\u9fa5]/g.test(SearchText)) {
			        IdCardNo = SearchText;
			    }
			    else {
			        Name = SearchText;
			    }
			    var PovertyStates=$("#dlPovertyState").val();
			    $("div[data-role='povertylist'] .povertyli").remove();
			    $.post(ServiceUrl + "PovertyArchivesInterface/PagerByHouseHandler.ashx", { pageno: Pageno, pagesize: pagesize, ProvinceID: ProvinceID, CityID: CityID, CountyID: CountyID, CountrySideID: CountrySideID, VillageId: VillageId, Name: Name, IdCardNo: IdCardNo, PovertyStates: PovertyStates }, function (data) {
			        var result = JSON.parse(data);
			        if (result != null) {
			            if (result.Result) {
			                $(".listcount>span").text(result.RecordCount);
			                if (PageCheck) {
			                    PageCheck = false;
			                    $(".clear").empty();
			                    $("<div>").appendTo($(".clear")).addClass("tcdPageCode").createPage({
			                        pageCount: result.PageCount,
			                        current: 1,
			                        backFn: function (p) {
			                            GetList(p);
			                        }
			                    });
			                }
			                var list = $("div[data-role='povertylist'] ul");
			                var pagenumber = Pageno * 20 - 19;
			                $(result.Data).each(function () {
			                    var ID = this.ID;
			                    var IdCardNo = this.IdCardNo;
			                    var povertyli = $("<li>").appendTo(list).addClass("povertyli");
			                    $("<div>").appendTo(povertyli).text(pagenumber).css("width", "7%");
			                    pagenumber++;
			                    $("<a>").appendTo($("<div>").appendTo(povertyli)).css("width", "15%").prop("href", "javascript:void(0)").addClass("name").text(this.Name).click(function () {
			                        GetDetailByHoseHold(ID);
			                    });
			                    //证件号
			                    $("<div>").appendTo(povertyli).css("width", "18%").text(this.IdCardNo);
			                    //住址
			                    var Region = (this.CountyName == null ? "" : this.CountyName) + (this.CountrySideName == null ? "" : this.CountrySideName) + (this.VillageName == null ? "" : this.VillageName) + (this.Address == null ? "" : this.Address);
			                    $("<div>").appendTo(povertyli).css("width", "28%").text(Region);
			                    //家庭人数
			                    $("<div>").appendTo(povertyli).css("width", "10%").text(this.FamilySize);
			                    //家庭在读人数
			                    var inschooldiv = $("<div>").css("width", "11%").appendTo(povertyli).text(this.InSchoolCount);
			                    //贫困状态
			                    if (this.PovertyStates == "0") {
			                        $("<div>").css("width", "11%").appendTo(povertyli).text("未复核");
			                    }
			                    else {
			                        $("<div>").css("width", "11%").appendTo(povertyli).text("已复核");
			                    }

			                });
			            }
			        }

			    });

			}
			function GetDetailByHoseHold(HouseHolderId) {
			    $(parent.document).find(".household_alert").empty();
			    $(parent.document).find(".household_alert").css("display", "inline-block");
			    var nam_alert = $("<div>").appendTo($(parent.document).find(".household_alert")).addClass("nam_alert");
			    var h1 = $("<h1>").appendTo(nam_alert);
			    $("<text>").appendTo(h1).text("贫困档案");
			    $("<a>").appendTo(h1).prop("href", "javascript:void(0)").addClass("iconfont").html("&#xe60e;").click(function () {
			        $(parent.document).find(".household_alert").hide();
			        $(parent.document).find(".household_alert").empty();
			    });
			    var name_box = $("<div>").appendTo(nam_alert).addClass("name_box");
			    var middle1 = $("<div>").appendTo(name_box).addClass("middle");
			    $("<h1>").appendTo(middle1).addClass("title").text("户口信息");
			    var Anmelden1 = $("<ul>").appendTo(middle1).addClass("Anmelden");
			    var middle2 = $("<div>").appendTo(name_box).addClass("middle");
			    $("<h1>").appendTo(middle2).addClass("title").text("贫困信息");
			    var Anmelden2 = $("<ul>").appendTo(middle2).addClass("Anmelden");
			    $.post(ServiceUrl + "PovertyArchivesInterface/GetHandler.ashx", { ID: HouseHolderId }, function (res) {
			        var json = JSON.parse(res);
			        if (json.Result) {
			            if (json.Data.length > 0) {

			                //户主姓名
			                var li = $("<li>").appendTo(Anmelden1);
			                $("<span>").appendTo(li).text("户主姓名:");
			                $("<div>").appendTo(li).text(json.Data[0].Name);
			                //户主证件
			                li = $("<li>").appendTo(Anmelden1);
			                $("<span>").appendTo(li).text("户主证件:");
			                $("<div>").appendTo(li).text(json.Data[0].IdCardNo);

			                //城市
			                li = $("<li>").appendTo(Anmelden1);
			                $("<span>").appendTo(li).text("市/州:");
			                $("<div>").appendTo(li).text(json.Data[0].CityName);
			                //县/区
			                li = $("<li>").appendTo(Anmelden1);
			                $("<span>").appendTo(li).text("县/区:");
			                $("<div>").appendTo(li).text(json.Data[0].CountyName);
			                //乡/镇
			                li = $("<li>").appendTo(Anmelden1);
			                $("<span>").appendTo(li).text("乡/镇:");
			                $("<div>").appendTo(li).text(json.Data[0].CountrySideName);
			                //村/居委会
			                li = $("<li>").appendTo(Anmelden1);
			                $("<span>").appendTo(li).text("村/居委会:");
			                $("<div>").appendTo(li).text(json.Data[0].VillageName);
			                //详细地址
			                li = $("<li>").appendTo(Anmelden1);
			                $("<span>").appendTo(li).text("详细地址:");
			                $("<div>").appendTo(li).text(json.Data[0].Address);
			                //家庭人数
			                li = $("<li>").appendTo(Anmelden1);
			                $("<span>").appendTo(li).text("家庭人数:");
			                $("<div>").appendTo(li).text(json.Data[0].FamilySize + "人");
			                //联系电话
			                li = $("<li>").appendTo(Anmelden1);
			                $("<span>").appendTo(li).text("联系电话:");
			                $("<div>").appendTo(li).text(json.Data[0].Phone);
			                //贫困原因
			                li = $("<li>").appendTo(Anmelden2);
			                $("<span>").appendTo(li).text("贫困原因:");
			                $("<div>").appendTo(li).text(json.Data[0].PovertyReason);
			                //贫困属性
			                li = $("<li>").appendTo(Anmelden2);
			                $("<span>").appendTo(li).text("贫困原因:");
			                $("<div>").appendTo(li).text(json.Data[0].PovertyProperties);
			                //识别标准
			                li = $("<li>").appendTo(Anmelden2);
			                $("<span>").appendTo(li).text("识别标准:");
			                $("<div>").appendTo(li).text(json.Data[0].DiscerningStandards);
			            }
			        }
			    });
			    var middle3 = $("<div>").appendTo(name_box).addClass("middle");
			    $("<h1>").appendTo(middle3).addClass("title").text("家庭成员信息");
			    $.post(ServiceUrl + "PovertyArchivesInterface/GetHandler.ashx", { HouseHolderId: HouseHolderId }, function (res) {
			        var json = JSON.parse(res);
			        if (json.Result) {
			            var data = [];
			            var familydata = PaiXu(json.Data);
			            $(familydata).each(function () {
			                var div = $("<div>").appendTo(middle3);
			                var Anmelden3 = $("<ul>").appendTo(div).addClass("Anmelden");
			                var anmeldenli = $("<li>").appendTo(Anmelden3);
			                $("<span>").appendTo(anmeldenli).text("姓名:");
			                $("<div>").appendTo(anmeldenli).text(this.Name);
			                anmeldenli = $("<li>").appendTo(Anmelden3);
			                $("<span>").appendTo(anmeldenli).text("证件号码:");
			                $("<div>").appendTo(anmeldenli).text(this.IdCardNo);
			                anmeldenli = $("<li>").appendTo(Anmelden3);
			                $("<span>").appendTo(anmeldenli).text("民族信息:");
			                $("<div>").appendTo(anmeldenli).text(this.Nation);
			                anmeldenli = $("<li>").appendTo(Anmelden3);
			                $("<span>").appendTo(anmeldenli).text("性别:");
			                if (this.Gender == "True") {
			                    $("<div>").appendTo(anmeldenli).text("男");
			                }
			                else {
			                    $("<div>").appendTo(anmeldenli).text("女");
			                }
			                var Birthday = new Date(this.BirthDay).getFullYear() + "-" + checklength(new Date(this.BirthDay).getMonth() + 1) + "-" + checklength(new Date(this.BirthDay).getDate());
			                anmeldenli = $("<li>").appendTo(Anmelden3);
			                $("<span>").appendTo(anmeldenli).text("出生日期:");
			                $("<div>").appendTo(anmeldenli).text(Birthday);
			                anmeldenli = $("<li>").appendTo(Anmelden3);
			                $("<span>").appendTo(anmeldenli).text("是否复核:");
			                if (this.PovertyStates == "0") {
			                    $("<div>").appendTo(anmeldenli).text("未复核").css("color", "#f00");
			                }
			                else {
			                    $("<div>").appendTo(anmeldenli).text("已复核").css("color", "#008B00");
			                }
			                anmeldenli = $("<li>").appendTo(Anmelden3);
			                $("<span>").appendTo(anmeldenli).text("户主关系:");
			                $("<div>").appendTo(anmeldenli).text(this.HouseholderRelation);
			                anmeldenli = $("<li>").appendTo(Anmelden3);
			                $("<span>").appendTo(anmeldenli).text("文化程度:");
			                $("<div>").appendTo(anmeldenli).text(this.DropoutSchool == "" ? "未辍学" : this.DropoutSchool);
			                if (this.DropoutSchool != "" && this.DropoutSchool != null && this.DropoutSchool != undefined && this.DropoutSchool != "NULL") {
			                    anmeldenli = $("<li>").appendTo(Anmelden3);
			                    $("<span>").appendTo(anmeldenli).text("劝返情况:");
			                    $("<div>").appendTo(anmeldenli).text(this.ReturnSchool == "True" ? "已返校" : "未返校");
			                }
			                anmeldenli = $("<li>").appendTo(Anmelden3);
			                $("<span>").appendTo(anmeldenli).text("省内外就读:");
			                if (this.IsProvinceStudy == "True") {
			                    $("<div>").appendTo(anmeldenli).text("省内");
			                }
			                else {
			                    $("<div>").appendTo(anmeldenli).text("省外");
			                }
			                anmeldenli = $("<li>").appendTo(Anmelden3);
			                $("<span>").appendTo(anmeldenli).text("培训需求:");
			                if (this.studentArchivesID == 0) {
			                    $("<div>").appendTo(anmeldenli).text("有");
			                    var peixunli = $("<li>").appendTo(Anmelden3);
			                    $("<span>").appendTo(peixunli).text("培训:");
			                    $("<div>").appendTo(peixunli).text("无需求");
			                }
			                else {


			                    if (this.IsLHS == "True") {
			                        $("<div>").appendTo(anmeldenli).text("有");
			                        var peixunli = $("<li>").appendTo(Anmelden3);
			                        $("<span>").appendTo(peixunli).text("培训:");
			                        if (this.LHSWorkId != 0 && this.LHSWorkId != "" && this.LHSWorkId != null && this.LHSWorkId != undefined && this.LHSWorkId != NaN) {
			                            $.post(ServiceUrl + "WorkInterface/GetHandler.ashx", { ID: this.LHSWorkId }, function (res) {
			                                var json = JSON.parse(res);
			                                if (json.Result) {
			                                    if (json.Data.length > 0) {
			                                        $("<div>").appendTo(peixunli).text(json.Data[0].Name);
			                                    }
			                                }

			                            });
			                        }
			                    }
			                    else {
			                        $("<div>").appendTo(anmeldenli).text("无");
			                    }
			                }
			                anmeldenli = $("<li>").appendTo(Anmelden3);
			                $("<span>").appendTo(anmeldenli).text("教育阶段:");
			                $("<div>").appendTo(anmeldenli).text(this.EduLevels);
			                anmeldenli = $("<li>").appendTo(Anmelden3);
			                $("<span>").appendTo(anmeldenli).text("年级:");
			                $("<div>").appendTo(anmeldenli).text(this.StudentStatus);
			                anmeldenli = $("<li>").appendTo(Anmelden3);
			                $("<span>").appendTo(anmeldenli).text("学校性质:");
			                if (this.SchoolNature == "True") {
			                    $("<div>").appendTo(anmeldenli).text("公办");
			                }
			                else {
			                    $("<div>").appendTo(anmeldenli).text("民办");
			                }
			                if ("" != this.SchoolName) {
			                    anmeldenli = $("<li>").appendTo(Anmelden3);
			                    $("<span>").appendTo(anmeldenli).text("学校名称:");
			                    $("<div>").appendTo(anmeldenli).text(this.SchoolName);

			                }
			                if ("" != this.StudentNo) {
			                    anmeldenli = $("<li>").appendTo(Anmelden3);
			                    $("<span>").appendTo(anmeldenli).text("学号:");
			                    $("<div>").appendTo(anmeldenli).text(this.StudentNo);
			                }
			                var Outschoolreason = "";
			                $(this.OutpreschoolReason.toString().split('|')).each(function () {
			                    var Outpreschoolid = this.toString();
			                    if (Outpreschoolid == "" || Outpreschoolid == null) {
			                        return;
			                    }
			                    $.post(ServiceUrl + "OutPreschoolReasonInterface/GetHandler.ashx", { ID: Outpreschoolid }, function (res) {
			                        var json = JSON.parse(res);
			                        if (json.Result) {
			                            $(json.Data).each(function () {
			                                Outschoolreason += this.Name + " ";
			                                outschooldiv.text(Outschoolreason);
			                            });
			                        }
			                    });
			                });
			                if ("" != Outschoolreason) {
			                    anmeldenli = $("<li>").appendTo(Anmelden3);
			                    $("<span>").appendTo(anmeldenli).text("未入学原因:");
			                    var outschooldiv = $("<div>").appendTo(anmeldenli);


			                }
			                if ("" != this.Remark) {
			                    anmeldenli = $("<li>").appendTo(Anmelden3);
			                    $("<span>").appendTo(anmeldenli).text("备注:");
			                    $("<div>").appendTo(anmeldenli).text(this.Remark);

			                }

			                $(this.PolicyID.split(",")).each(function () {
			                    var policyid = this.toString();

			                    $.post(ServiceUrl + "PolicyInterface/GetHandler.ashx", { ID: policyid }, function (res1) {
			                        var json1 = JSON.parse(res1);
			                        if (json1.Result) {
			                            if (json1.Data.length > 0) {
			                                anmeldenli = $("<li>").appendTo(Anmelden3);
			                                $("<span>").appendTo(anmeldenli).text("帮扶政策:");
			                                var policydiv = $("<div>").appendTo(anmeldenli);
			                                var p = $("<p>").appendTo(policydiv).text(json1.Data[0].Name + "(补助金额：" + json1.Data[0].Amount + "元）");
			                            }
			                        }
			                    });
			                });
			            });
			        }
			    });
			}
		</script>
	</body>
</html>
